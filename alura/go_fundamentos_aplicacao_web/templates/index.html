{{define "Index"}}
{{template "_Head"}}
  <body>
    {{template "_Navbar"}}

    <main class="container">
      <table class="table table-bordered table-hover mb-4">
        <thead class="thead-dark">
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Preço</th>
            <th colspan="3">Quantidade</th>
          </tr>
        </thead>

        <tbody>
          {{range .}}
          <tr>
            <td>{{.Name}}</td>
            <td>{{.Description}}</td>
            <td>{{.Price}}</td>
            <td>{{.Quantity}}</td>
            <td align="center">
              <a class="btn btn-primary" href="/edit/{{.Id}}">Editar</a>
            </td>
            <td align="center">
              <button class="btn btn-danger" data-delete data-id="{{.Id}}">
                Deletar
              </button>
            </td>
          </tr>
          {{end}}
        </tbody>
      </table>

      <a href="/new" class="btn btn-primary">Cadastrar novo produto</a>
    </main>
  </body>

  <script>
    (function () {
      $("[data-delete]").click(function () {
        var result = confirm("Tem certeza que deseja deletar o produto?");

        if (!result) return;

        var id = $(this).data("id");

        window.location.replace("/delete/" + id);
      });
    })();
  </script>
{{template "_Footer"}}
{{end}}